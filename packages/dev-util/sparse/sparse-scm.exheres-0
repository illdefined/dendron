# Copyright MMXâ€“MMXI
#     Mikael Voss <mikael+exherbo@illdefined.org>
# Distributed under the terms of the GNU General Public License v2

SCM_REPOSITORY="git://git.kernel.org/pub/scm/devel/${PN}/${PN}.git"

require scm-git purify

SUMMARY="Semantic parser for C"
HOMEPAGE="https://${PN}.wiki.kernel.org/"

REMOTE_IDS="freecode:${PN}"

LICENCES="OSL-1.1"
SLOT="0"
PLATFORMS="~amd64 ~x86"

MYOPTIONS="
	xml [[ description = [ Build c2xml utility ] ]]"

DEPENDENCIES="
	build:
		dev-util/pkg-config

	build+run:
		xml? ( dev-libs/libxml2 )"

src_prepare() {
	default
	purify "Makefile" \
		"CC" "CFLAGS" \
		"DESTDIR=${IMAGE}" \
		"PREFIX=/usr" \
		"LIBDIR=/usr/${LIBDIR:-lib}" \
		"HAVE_LIBXML=$(optionq xml && echo yes)"
}
