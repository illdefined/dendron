# Copyright MMXVIII
#     Mikael Voss <mvs@nyantec.com>
# Distributed under the terms of the GNU General Public License v2

require github [ user=swaywm ]
require meson

SUMMARY="Modular Wayland compositor library"

LICENCES="MIT"
SLOT="0"
PLATFORMS="~amd64"

MYOPTIONS="
    X
    caps
    ( providers: eudev systemd ) [[ number-selected = exactly-one ]]
    ( providers: elogind systemd ) [[ number-selected = exactly-one ]]"

DEPENDENCIES="
    build+run:
        sys-libs/libinput
        sys-libs/wayland
        sys-libs/wayland-protocols
        x11-dri/libdrm
        x11-dri/mesa[wayland]
        x11-libs/libxkbcommon
        x11-libs/pixman
        X? (
            x11-libs/libxcb
            x11-utils/xcb-util-image
            x11-utils/xcb-util-wm
        )
        caps? ( sys-libs/libcap )
        providers:elogind? ( sys-auth/elogind )
        providers:eudev? ( sys-apps/eudev )
        providers:systemd? ( sys-apps/systemd )"

MESON_SRC_CONFIGURE_OPTION_ENABLES=(
    "X xwayland"
    "caps libcap"
    "providers:systemd systemd"
    "providers:elogind elogind"
)
