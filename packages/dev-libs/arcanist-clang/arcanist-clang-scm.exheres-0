# Copyright MMXVIII
#     Mikael Voss <mvs@nyantec.com>
# Distributed under the terms of the GNU General Public License v2

require github [ user="pwithnall" pn="morefas-phabricator" ]

SUMMARY="clang-format linter for Arcanist"

LICENCES="BSD-3"
SLOT="0"
PLATFORMS="~amd64"

DEPENDENCIES="
    run:
        dev-lang/clang
        dev-util/arcanist"

pkg_setup() {
    exdirectory --allow /opt
}

src_configure() {
    :
}

src_compile() {
    :
}

src_install() {
    local incdir="${IMAGE}/opt/phacility/arcanist/externals/includes/clang-format-linter"
    local extdir="${IMAGE}/opt/phacility/arcanist/src/extensions"

    edo mkdir -p "${incdir}" "${extdir}"
    edo cp -R *.php lint utils "${incdir}"
    edo cp "${FILES}/clang-format-linter.php" "${extdir}"
}
